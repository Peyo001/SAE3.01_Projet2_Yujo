{% extends "base_template.html.twig" %}

{% block title %}Modification du profil {{utilisateur.nom}}{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h1 class="display-5 fw-bold" style="color: #3D3791;">Modification du profil</h1>
            <p class="text-muted">Modifiez les informations de votre profil, {{ utilisateur.nom }}</p>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <form action="index.php?controleur=utilisateur&methode=modifierProfil" method="POST" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="nom" class="form-label">Nom</label>
                    <input type="text" class="form-control" id="nom" name="nom" value="{{ utilisateur.nom }}" minlength="2" maxlength="150" pattern="^[a-zA-ZÀ-ÿ\'-]+$">
                </div>
                <div class="mb-3">
                    <label for="prenom" class="form-label">Prénom</label>
                    <input type="text" class="form-control" id="prenom" name="prenom" value="{{ utilisateur.prenom }}" minlength="2" maxlength="150" pattern="^[a-zA-ZÀ-ÿ\'-]+$" required>
                </div>
                <div class="mb-3">
                    <label for="pseudo" class="form-label">Pseudo</label>
                    <input type="text" class="form-control" id="pseudo" name="pseudo" value="{{ utilisateur.pseudo }}" minlength="3" maxlength="150" pattern="^[a-zA-Z0-9_]+$">
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" name="email" value="{{ utilisateur.email }}" maxlength="255">
                </div>
                <div class="mb-3">
                    <label for="photo_profil" class="form-label">Photo de profil</label>
                    <input type="file" class="form-control" id="photo_profil" name="photo_profil" accept="image/png, image/jpeg, image/webp">
                    {% if utilisateur.personnalisation %}
                        <div class="mt-2">
                            <small class="text-muted">Photo actuelle :</small><br>
                            <img src="{{ utilisateur.personnalisation }}" alt="Photo de profil" class="img-thumbnail" style="max-width: 140px;">
                        </div>
                    {% endif %}
                    <small class="text-muted">Formats acceptés : JPG, PNG, WEBP. Taille max 2 Mo.</small>
                </div>
                <button type="submit" class="btn btn-primary" style="background-color: #e9407A;">Enregistrer les modifications</button>
            </form>

            {% if erreurs is defined and erreurs is not empty %}
            <div class="alert alert-danger mt-3" role="alert">
                <h6 class="mb-2">Veuillez corriger les erreurs suivantes :</h6>
                <ul class="mb-0">
                    {% for msg in erreurs %}
                        <li>{{ msg }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
